{% extends 'geonode-mapstore-client/_geonode_config.html' %}
{% load static %}
{% block override_local_config %}
<script>
    window.__GEONODE_CONFIG__.overrideLocalConfig = function(localConfig, _) {
        // Custom ADMA configuration
        localConfig.siteName = "Agricultural Data Management and Analytics";
        localConfig.siteDescription = "Discover, explore, and share geospatial data with our advanced Geographic Information System platform.";
        
        // Custom logo configuration
        localConfig.logoSrc = "{% static 'img/Nebraska_N_4c.jpg' %}";
        localConfig.logoAlt = "Agricultural Data Management and Analytics";
        localConfig.logoWidth = 120;
        localConfig.logoHeight = 50;
        
        // Custom theme colors
        localConfig.theme = {
            ...localConfig.theme,
            primaryColor: "#d00000",
            accentColor: "#a40000",
            backgroundColor: "#f8f9fa"
        };
        
        // Custom header configuration  
        localConfig.header = {
            ...localConfig.header,
            showLogo: true,
            logoSrc: "{% static 'img/Nebraska_N_4c.jpg' %}",
            logoAlt: "Agricultural Data Management and Analytics",
            title: "Agricultural Data Management and Analytics"
        };
        
        // Override navbar branding
        localConfig.navbar = {
            ...localConfig.navbar,
            brand: {
                logo: "{% static 'img/Nebraska_N_4c.jpg' %}",
                title: "Agricultural Data Management and Analytics",
                href: "/"
            }
        };
        
        return localConfig;
    };
    
    // Force Nebraska logo replacement after page load
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            // Replace any existing logo images with Nebraska logo
            const logoSelectors = [
                '.navbar-brand img',
                '.ms-navbar .navbar-brand img', 
                '.ms-header .logo img',
                '.ms-brand img',
                'img[src*="logo"]',
                'img[src*="geonode"]'
            ];
            
            logoSelectors.forEach(selector => {
                const logos = document.querySelectorAll(selector);
                logos.forEach(logo => {
                    logo.src = '{% static "img/Nebraska_N_4c.jpg" %}';
                    logo.alt = 'Agricultural Data Management and Analytics';
                    logo.style.maxHeight = '50px';
                    logo.style.width = 'auto';
                    logo.style.borderRadius = '6px';
                    logo.style.boxShadow = 'none';
                    logo.style.display = 'inline-block';
                });
            });
                }, 100);
        
        // Continue checking and replacing logos as MapStore loads
        setInterval(function() {
            const allImages = document.querySelectorAll('img');
            allImages.forEach(img => {
                if (img.src && (img.src.includes('logo') || img.src.includes('geonode')) && !img.src.includes('Nebraska_N_4c.jpg')) {
                    img.src = '{% static "img/Nebraska_N_4c.jpg" %}';
                    img.alt = 'Agricultural Data Management and Analytics';
                    img.style.maxHeight = '50px';
                    img.style.width = 'auto';
                    img.style.boxShadow = 'none';
                }
            });
            
            // Replace any "GeoNode" text with "Agricultural Data Management and Analytics"
            const textSelectors = [
                '.navbar-brand-text',
                '.site-title',
                '.ms-navbar .navbar-brand',
                '.navbar-brand span',
                'title',
                '.ms-hero h1',
                '.hero-banner h1',
                '.homepage-hero h1',
                '.jumbotron h1',
                '.hero-section h1',
                '.ms-home-header h1',
                '.home-description h1'
            ];
            
            textSelectors.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                    if (element.textContent && element.textContent.includes('GeoNode')) {
                        element.textContent = element.textContent.replace(/GeoNode/g, 'Agricultural Data Management and Analytics');
                    }
                    if (element.innerHTML && element.innerHTML.includes('GeoNode')) {
                        element.innerHTML = element.innerHTML.replace(/GeoNode/g, 'Agricultural Data Management and Analytics');
                    }
                    // Specifically set banner text
                    if (selector.includes('h1') && element.tagName === 'H1') {
                        element.textContent = 'Agricultural Data Management and Analytics';
                        element.style.textAlign = 'center';
                        element.style.color = 'white';
                        element.style.fontSize = '2.5rem';
                        element.style.fontWeight = '600';
                        element.style.textShadow = 'none';
                        element.style.margin = '0';
                        element.style.padding = '0';
                        element.style.border = 'none';
                        element.style.display = 'block';
                        element.style.width = '100%';
                    }
                });
            });
            
            // Force all banner elements to be red background
            const bannerSelectors = [
                '.ms-hero', '.hero-banner', '.homepage-hero', '.jumbotron',
                '.hero-section', '.ms-home-header', '.ms-home-description',
                '.home-description', '.ms-home', '.ms-home-intro', '.ms-intro',
                '.intro-section', '.banner', '.header-banner', '.top-banner',
                '.ms-header-banner', '.ms-home-content', '.ms-homepage-hero',
                '.ms-app-header', '.home-header', '.main-banner',
                'div[class*="hero"]', 'div[class*="banner"]', 'div[class*="intro"]',
                'section[class*="hero"]', 'section[class*="banner"]', 'section[class*="intro"]'
            ];
            
            bannerSelectors.forEach(selector => {
                const banners = document.querySelectorAll(selector);
                banners.forEach(banner => {
                    banner.style.background = '#d00000';
                    banner.style.backgroundColor = '#d00000';
                    banner.style.backgroundImage = 'none';
                    banner.style.width = '100vw';
                    banner.style.marginLeft = 'calc(-50vw + 50%)';
                    banner.style.marginRight = 'calc(-50vw + 50%)';
                    banner.style.padding = '90px 0';
                    banner.style.margin = '0';
                    banner.style.border = 'none';
                    banner.style.color = 'white';
                    banner.style.textAlign = 'center';
                    banner.style.position = 'relative';
                    banner.style.display = 'flex';
                    banner.style.alignItems = 'center';
                    banner.style.justifyContent = 'center';
                    banner.style.minHeight = '300px';
                    
                    // Remove all existing content and add only the title
                    banner.innerHTML = '<h1 style="color: white; text-align: center; margin: 0; padding: 0; border: none; font-size: 2.5rem; font-weight: 600; text-shadow: none; width: 100%;">Agricultural Data Management and Analytics</h1>';
                });
            });

            // Completely hide all footers
            const footerSelectors = [
                'footer',
                '.footer', 
                '.ms-footer',
                '.page-footer',
                '.site-footer',
                '.ms-page-footer'
            ];
            
            footerSelectors.forEach(selector => {
                const footers = document.querySelectorAll(selector);
                footers.forEach(footer => {
                    footer.style.display = 'none';
                    footer.style.visibility = 'hidden';
                    footer.style.height = '0';
                    footer.style.margin = '0';
                    footer.style.padding = '0';
                });
            });
            
            // Update document title
            if (document.title.includes('GeoNode') || document.title === 'localhost') {
                document.title = 'Agricultural Data Management and Analytics';
            }
        }, 500);
    });
</script>

<!-- Custom CSS for immediate styling -->
<style>
/* Clean white background for page */
html, body {
    background-color: white !important;
    background: white !important;
}

/* Main content areas clean white background */
.ms-main-container,
.ms-body,
#ms2-container,
#container,
.main-content,
.ms-content,
.container,
.container-fluid,
.main,
.content,
.ms-app,
.ms-body-container,
section,
div[class*="content"],
div[class*="main"],
div[class*="body"] {
    background-color: white !important;
    background: white !important;
}

/* Banner section full width red background - Target all possible banner elements */
.ms-hero,
.hero-banner,
.homepage-hero,
.jumbotron,
.hero-section,
.ms-home-header,
.ms-home-description,
.home-description,
.ms-home,
.ms-home-intro,
.ms-intro,
.intro-section,
.banner,
.header-banner,
.top-banner,
.ms-header-banner,
.ms-home-content,
.ms-homepage-hero,
.ms-app-header,
.home-header,
.main-banner,
div[class*="hero"],
div[class*="banner"],
div[class*="intro"],
section[class*="hero"],
section[class*="banner"],
section[class*="intro"] {
    background: #d00000 !important;
    background-color: #d00000 !important;
    background-image: none !important;
    width: 100vw !important;
    margin-left: calc(-50vw + 50%) !important;
    margin-right: calc(-50vw + 50%) !important;
    padding: 90px calc(50vw - 50%) !important;
    min-height: 300px !important;
    color: white !important;
    text-align: center !important;
    position: relative !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Force banner content to be centered */
.ms-hero *,
.hero-banner *,
.homepage-hero *,
.jumbotron *,
.hero-section *,
.ms-home-header *,
.ms-home-description *,
.home-description *,
.ms-home *,
.ms-home-intro *,
.ms-intro *,
.intro-section *,
.banner *,
.header-banner *,
.top-banner *,
.ms-header-banner *,
.ms-home-content *,
.ms-homepage-hero *,
.ms-app-header *,
.home-header *,
.main-banner *,
div[class*="hero"] *,
div[class*="banner"] *,
div[class*="intro"] *,
section[class*="hero"] *,
section[class*="banner"] *,
section[class*="intro"] * {
    color: white !important;
    text-align: center !important;
}

/* Clean banner h1 styling - pure centered text */
.ms-hero h1,
.hero-banner h1,
.homepage-hero h1,
.jumbotron h1,
.hero-section h1,
.ms-home-header h1,
.ms-home-description h1,
.home-description h1,
.ms-home h1,
.ms-home-intro h1,
.ms-intro h1,
.intro-section h1,
.banner h1,
.header-banner h1,
.top-banner h1,
.ms-header-banner h1,
.ms-home-content h1,
.ms-homepage-hero h1,
.ms-app-header h1,
.home-header h1,
.main-banner h1,
div[class*="hero"] h1,
div[class*="banner"] h1,
div[class*="intro"] h1,
section[class*="hero"] h1,
section[class*="banner"] h1,
section[class*="intro"] h1 {
    color: white !important;
    text-align: center !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    font-size: 2.5rem !important;
    font-weight: 600 !important;
    text-shadow: none !important;
    box-shadow: none !important;
    outline: none !important;
    width: 100% !important;
}

/* Hide all banner subtitle elements */
.ms-hero p,
.hero-banner p,
.homepage-hero p,
.jumbotron p,
.hero-section p,
.ms-home-header p,
.ms-home-description p,
.home-description p,
.ms-home p,
.ms-home-intro p,
.ms-intro p,
.intro-section p,
.banner p,
.header-banner p,
.top-banner p,
.ms-header-banner p,
.ms-home-content p,
.ms-homepage-hero p,
.ms-app-header p,
.home-header p,
.main-banner p,
div[class*="hero"] p,
div[class*="banner"] p,
div[class*="intro"] p,
section[class*="hero"] p,
section[class*="banner"] p,
section[class*="intro"] p,
.ms-hero .lead,
.hero-banner .lead,
.homepage-hero .lead,
.jumbotron .lead,
.hero-section .lead,
.ms-home-header .lead,
.ms-home-description .lead,
.home-description .lead,
.ms-home .lead,
.ms-home-intro .lead,
.ms-intro .lead,
.intro-section .lead,
.banner .lead,
.header-banner .lead,
.top-banner .lead,
.ms-header-banner .lead,
.ms-home-content .lead,
.ms-homepage-hero .lead,
.ms-app-header .lead,
.home-header .lead,
.main-banner .lead,
div[class*="hero"] .lead,
div[class*="banner"] .lead,
div[class*="intro"] .lead,
section[class*="hero"] .lead,
section[class*="banner"] .lead,
section[class*="intro"] .lead {
    display: none !important;
}

/* Hide banner buttons */
.ms-hero .btn,
.hero-banner .btn,
.homepage-hero .btn,
.jumbotron .btn,
.hero-section .btn,
.ms-home-header .btn,
.ms-home-description .btn,
.home-description .btn,
.ms-home .btn,
.ms-home-intro .btn,
.ms-intro .btn,
.intro-section .btn,
.banner .btn,
.header-banner .btn,
.top-banner .btn,
.ms-header-banner .btn,
.ms-home-content .btn,
.ms-homepage-hero .btn,
.ms-app-header .btn,
.home-header .btn,
.main-banner .btn,
div[class*="hero"] .btn,
div[class*="banner"] .btn,
div[class*="intro"] .btn,
section[class*="hero"] .btn,
section[class*="banner"] .btn,
section[class*="intro"] .btn {
    display: none !important;
}

/* Prevent banner content flash - hide all initially until JS loads */
.ms-hero > *:not(h1),
.hero-banner > *:not(h1),
.homepage-hero > *:not(h1),
.jumbotron > *:not(h1),
.hero-section > *:not(h1),
.ms-home-header > *:not(h1),
.ms-home-description > *:not(h1),
.home-description > *:not(h1),
.ms-home > *:not(h1),
.ms-home-intro > *:not(h1),
.ms-intro > *:not(h1),
.intro-section > *:not(h1),
.banner > *:not(h1),
.header-banner > *:not(h1),
.top-banner > *:not(h1),
.ms-header-banner > *:not(h1),
.ms-home-content > *:not(h1),
.ms-homepage-hero > *:not(h1),
.ms-app-header > *:not(h1),
.home-header > *:not(h1),
.main-banner > *:not(h1),
div[class*="hero"] > *:not(h1),
div[class*="banner"] > *:not(h1),
div[class*="intro"] > *:not(h1),
section[class*="hero"] > *:not(h1),
section[class*="banner"] > *:not(h1),
section[class*="intro"] > *:not(h1) {
    visibility: hidden !important;
    opacity: 0 !important;
}

/* Force any existing banner h1 to be immediately centered */
.ms-hero h1,
.hero-banner h1,
.homepage-hero h1,
.jumbotron h1,
.hero-section h1,
.ms-home-header h1,
.ms-home-description h1,
.home-description h1,
.ms-home h1,
.ms-home-intro h1,
.ms-intro h1,
.intro-section h1,
.banner h1,
.header-banner h1,
.top-banner h1,
.ms-header-banner h1,
.ms-home-content h1,
.ms-homepage-hero h1,
.ms-app-header h1,
.home-header h1,
.main-banner h1,
div[class*="hero"] h1,
div[class*="banner"] h1,
div[class*="intro"] h1,
section[class*="hero"] h1,
section[class*="banner"] h1,
section[class*="intro"] h1 {
    position: absolute !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: 100% !important;
    z-index: 10 !important;
}

/* Navigation bar with white background */
.ms-navbar,
.navbar,
.ms-header,
nav {
    background-color: white !important;
    background: white !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Navbar text color for white background */
.navbar-nav .nav-link,
.ms-navbar .nav-link,
.navbar-brand,
.navbar-brand-text,
.navbar-text {
    color: #333 !important;
}

.navbar-nav .nav-link:hover,
.ms-navbar .nav-link:hover {
    color: #d00000 !important;
}

/* Hide all footers completely */
footer,
.footer,
.ms-footer,
.page-footer,
.site-footer,
.ms-page-footer {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
}
/* Override MapStore default styling - Force Nebraska logo */
.ms-navbar .navbar-brand img,
.navbar-brand img,
.logo img,
.ms2-navbar .navbar-brand img,
.navbar-header .navbar-brand img,
.ms-header .logo img,
.ms-brand img,
img[src*="logo"],
img[src*="geonode"] {
    content: url('{% static "img/Nebraska_N_4c.jpg" %}') !important;
    max-height: 50px !important;
    width: auto !important;
    border-radius: 6px;
    box-shadow: none !important;
    display: inline-block !important;
}

/* Target specific MapStore navbar selectors */
.ms-navbar-brand img,
.ms-navbar-brand > img,
.navbar-brand > img,
.ms-header-brand img {
    content: url('{% static "img/Nebraska_N_4c.jpg" %}') !important;
    max-height: 50px !important;
    width: auto !important;
    box-shadow: none !important;
}

/* Site title styling */
.navbar-brand .navbar-brand-text,
.ms-navbar .navbar-brand-text,
.site-title {
    color: white !important;
    font-weight: 600;
    margin-left: 10px;
}

/* Hero banner background */
.ms-hero,
.homepage-hero,
.jumbotron,
.hero-section {
    background: #d00000 !important;
    background: linear-gradient(135deg, #d00000 0%, #a40000 100%) !important;
}

/* Force Nebraska logo display everywhere */
.navbar-brand {
    background-image: none !important;
    position: relative;
}

.navbar-brand::before {
    content: '';
    display: inline-block;
    width: 50px;
    height: 50px;
    background-image: url('{% static "img/Nebraska_N_4c.jpg" %}');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    border-radius: 6px;
    box-shadow: none !important;
    margin-right: 10px;
}

.navbar-brand img,
.ms-navbar .navbar-brand img,
.logo-container img {
    display: inline-block !important;
    max-height: 50px !important;
    width: auto !important;
}

/* Additional targeting for top-left logo */
.ms-navbar .navbar-brand,
.navbar-header .navbar-brand,
nav .navbar-brand {
    display: flex !important;
    align-items: center !important;
}

/* Primary button colors */
.btn-primary {
    background-color: #d00000 !important;
    border-color: #d00000 !important;
}

.btn-primary:hover {
    background-color: #a40000 !important;
    border-color: #a40000 !important;
}
</style>
{% endblock %}
